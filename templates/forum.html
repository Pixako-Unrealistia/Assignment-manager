
<html>
    <!-- without api -->
<head>
<style>
    *{
        position: relative;
    }
	body {
			font-family: Mali;
			background-color: #f4f4f4;
			margin: 0;
			padding: 0;
		}

    div.header{
        pointer-events: none;

        padding-left: 10px ;
        height: 100%;
        background-color: #007BFF;
        color: #f4f4f4;

        writing-mode: vertical-lr;
        position: fixed;
        width : 250px ;
        text-align: center;
        font-size: 50px;

        transform: rotate(180deg);

        border-right: 1px solid #494949;
    }


    div.content{
        margin-left : 260px ;
        background-color: white;
        height: 100%;
        color: black;
        font-size: 25px;
        text-align : center ;
    }

    h1#name{
        padding-top: 50px;
        font-size: 40px;
    }

    #detail{
        font-size: 28px;
        padding-left: 20px;
        padding-right: 20px;
    }

    #due{
        color: rgb(166, 36, 36);
        font-size: 28px;
    }


    td {
        width : fit-content;
        height: fit-content;

        vertical-align: bottom;
        
		color: black;
        font-size: 25px;
    }

    #pic{
        vertical-align: top;
        font-size: 18px;
        padding-right: 20px;
    }

    img{
        /**/
        width : 60px;
        height : 60px ;
        border-radius: 25%;
    }

    #comment{
        text-align: left ;
        padding-left: 40px;
    }

    #cmt{
        border: 2px solid black;
        border-radius: 25px;
        padding: 25px;

        background-color: #b6d9ff;
    }

    #cmt p{
        color: red;
    }

    #cmt , #username{
        font-size: 24px;
    }

    #time{
        font-size: 22px;
        padding-left: 30px;
    }

    #submit{
        cursor: pointer;

        transition: .2s;

        position: fixed;
        bottom: 25px;
        right : 20px ;
        background-color: #b6d9ff;

        border-radius: 50%;
        border: 1px solid black;
        align-items: center;
        justify-content: center;
        display: flex;

        font-size: 20px;

        width : 50px ;
        height: 50px;
    }

    #submit:hover{
        background-color: #007BFF;
        color: white;
    }


    .space{
        padding-bottom: 100px;
        background-color: white;
    }

    textarea {
        font-size:  25px;
        font-family: Mali;

        width : calc(100% - 270px - 80px) ;
        height: 40px;

        border-radius: 10px;

        position: fixed;

        bottom: 30px;
        left: 270px;

        resize: none;
    }

    table {
        padding-bottom: 15px;
        
    }

    #username{
        cursor: pointer;
    }

    #re {

        display: none;
        position: fixed;

        bottom: 70px;
        left: 300px;

        background-color: #d6d6d6;
        border-radius: 10px  10px 0px 0px;
        padding: 5px;
    }
    #closeRe{
        display: none;
        cursor: pointer;

        width: 30px;
        height: 30px;

        background-color: #d6d6d6;
        border: 1px solid black;
        border-radius: 50%;

        position: fixed;

        bottom: 85px;
        left: 275px;

        font-size: 18px;

    }


</style>
</head>

<body>
    <div class="header">
        <p id = "day">{{ day }}</p>
        <p id = "dmy">{{ date }}</p>
    </div>
    <div class="content">
        <h1 id = "name">{{name}}</h1>
        <p id = "detail">{{detail}}</p>
        <p id = "due">{{due}}</p>
        <div id="comment">
            <!-- Add comment here -->
        </div>

        
        <!-- space -->
        <div class="space"></div>
        <form id = "textmessage">
        <!-- re -->
            <div id="re">RE : </div>
            <button id="closeRe">X</button>
            
        <!-- Text mesage -->
        
            <textarea id = "add"></textarea>
            <button id = "submit">></button>
        </form>
    </div>
</body>
<script>
	let today = new Date();
	let dd = String(today.getDate()).padStart(2, '0');
	let mm = String(today.getMonth() + 1).padStart(2, '0'); //Starting from jan
	let yyyy = today.getFullYear();
	let date = dd + mm + yyyy;

    //try w/o api
    //using the same object that I have sent with first-draft assignment

    data = {
        "day" : "Wednesday" ,
        "date" : ["21" , "21st"] ,
        "month" : "September" ,
        "year" : "2023" ,
        "list" : [
            {   
                "name" :"HW11" , 
                "subject" : "Web programming",
                "content" : "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
                "due" : "20:00" ,
                "comment" : [
                    {
                        "re" : "",
                        "detail" : "Comment1" ,
                        "user" : "Username" ,
                        "time" : "13:43, 12th October, 2023" ,
                    } ,
                    {
                        "re" : "65011460",
                        "detail" : "Comment2" ,
                        "user" : "Username2" ,
                        "time" : "13:23, 13th October, 2023" ,
                    }
                ]
            },
            {   
                "name" :"Mini project" , 
                "subject" : "Excel",
                "content" : "",
                "due" : "" ,
                "comment" : [
                    {
                        "re" : "",
                        "detail" : "" ,
                        "user" : "" ,
                        "time" : "" ,
                    }
                ]
            },
            {   
                "name" :"Term paper" , 
                "subject" : "Probability & Statistic",
                "content" : "",
                "due" : "" ,
                "comment" : [
                    {
                        "re" : "",
                        "detail" : "" ,
                        "user" : "" ,
                        "time" : "" ,
                    }
                ]
            },
        ]
    } ;
    index = 0 ;
    function display(){
        document.getElementById("day").innerHTML = data.day ;
        document.getElementById("dmy").innerHTML = data.date[1] + " " + data.month + " " + data.year ;
        // Using an index of list to determine which homework it is
        document.getElementById("name").innerHTML = data.list[index].name + "::::" + data.list[index].subject;
        document.getElementById("detail").innerHTML = data.list[index].content ;
        document.getElementById("due").innerHTML = "DUE TIME : " +  data.list[index].due ;
        // Make comment section
        let comment = document.getElementById("comment") ;
        /**/
        comment.innerHTML = '' ;
        for(let item of data.list[index].comment){
            let table = document.createElement('table') ;
            let tr = document.createElement('tr') ;
            let td = document.createElement('td') ;

            let img = document.createElement('img') ;
            img.src = "" ;
            img.alt = "user" ;
            img.id = "pic" ;
            td.appendChild(img) ;
            td.rowSpan = "2" ;
            td.style.verticalAlign = "top"
            tr.appendChild(td) ;

            td = document.createElement('td') ;
            td.textContent = item.user ;
            td.id = 'username' ;
            tr.appendChild(td) ;
            table.appendChild(tr) ;

            tr = document.createElement('tr') ;

            td = document.createElement('td') ;
            td.id = "cmt" ;
            if(item.re != ""){
                let p = document.createElement('p') ;
                p.textContent = "RE : " + item.re ;
                td.appendChild(p) ;
            }
            let div = document.createElement('div') ;
            div.textContent = item.detail;
            td.appendChild(div) ;        
            tr.appendChild(td);

            td = document.createElement('td') ;
            td.id = 'time' ;
            td.textContent = item.time ;
            tr.appendChild(td);

            table.appendChild(tr) ;
            comment.appendChild(table) ;
        }
    }
    display()

    let add = document.getElementById("add") ;
    let submit = document.getElementById("submit") ;


    //I tried to make an active button, but still, I haven't successed yet.

    let json = {
            "re" : "" ,
            "detail" : add.textContent ,
            "user" : "Username" ,
            "time" : "13:43, 12th October, 2023" ,
        };

    window.addEventListener('click' , function(e){
        let event = e.target.getAttribute("id") ;
        json.detail = add.textContent ;
        //submit
        if(add.textContent != "" && event == "submit" ){
            data.list[index].comment.push(json) ;
            console.log("a") ;
            json.re = "" ;
            display() ;
        }
        //remessaging
        if(event == "username"){
            json.re = e.target.value ;
            let re = document.getElementById("re") ;
            re.innerHTML = "RE : " + json.re ;
            re.style.display = "block" ;
            document.getElementById("closeRe").style.display = "block" ;
        //close remessaging
        if(event == "closeRe"){
            document.getElementById("re").style.display = "none" ;
            document.getElementById("closeRe").style.display = "none" ;
        }

        }
        
        
    })







</script>
</html>
